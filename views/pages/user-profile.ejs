<head>
  <%- include('../partials/head'); %>
</head>

<body>
  <% if(activeUser) { %>
    <%- include('../partials/topnavUser'); %>
  <% } else { %>
    <%- include('../partials/topnav'); %>
  <% } %>
  <main>
    <h4>User Profile</h4>
    <% if(NotificationText) { %>
      <%- include('../partials/notice'); %>
    <% } %>
    <h5>My Profile Info</h5>
    <form class="signup uk-grid-small uk-form-stacked" uk-grid>
      <div class="uk-width-1-2@s">
        <label class="uk-form-label" for="FirstName">First Name</label>
        <input class="uk-input" id="FirstName" type="text" placeholder="Firstname" value="<%= User.FirstName %>">
      </div>
      <div class="uk-width-1-2@s">
        <label class="uk-form-label" for="LastName">Last Name</label>
        <input class="uk-input" id="LastName" type="text" placeholder="Lastname" value="<%= User.LastName %>">
      </div>
      <div class="uk-width-1-2@s">
        <label class="uk-form-label" for="UserName">Username</label>
        <input class="uk-input" id="UserName" type="text" placeholder="Username" value="<%= User.UserName %>">
      </div>
      <div class="uk-width-1-2@s">
        <label class="uk-form-label" for="FlagNumber">Flag Number</label>
        <input class="uk-input" id="FlagNumber" type="text" placeholder="Flag Number" value="<%= User.FlagNumber %>">
      </div>
      <div class="uk-width-1-2@s">
        <label class="uk-form-label" for="Email">Email</label>
        <input class="uk-input" id="Email" type="email" placeholder="someone@domain.com" value="<%= User.Email %>">
      </div>
      <div class="uk-width-1-2@s">
        <label class="uk-form-label" for="ZipCode">ZipCode</label>
        <input class="uk-input" id="ZipCode" type="zipcode" placeholder="zip" value="<%= User.ZipCode %>">
      </div>
      <div class="uk-width-1-2@s">
        <label class="uk-form-label" for="PillionFlagNumber">Passenger Flag Number</label>
        <input class="uk-input" id="PillionFlagNumber" type="text" placeholder="Flag Number" value="<%= User.PillionFlagNumber %>">
      </div>
      <div class="uk-width-1-2@s"><button type="button" id="saveProfileEdits" class="uk-button uk-button-primary" data-userid="<%= User.id %>">Update User Profile</button></div>
    </form>
    <div>
      <h5>Submission History</h5>
      <table class="uk-table uk-table-striped uk-table-small" id="riderSubmissionHistory">
        <thead>
          <tr>
            <th>Code</th>
            <th>Category</th>
            <th>Status</th>
            <th>Date Submitted</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% RiderSubmissionHistory.forEach(function(riderSubmission) { %>
            <tr>
              <td>
                <span style="font-family: 'Source Code Pro', monospace;"><a href="/memorial/<%= riderSubmission.Code %>"><%= riderSubmission.Code %></a></span>
              </td>
              <td>
                <%= riderSubmission.Category %>
              </td>
              <td>
                <% if(riderSubmission.StatusID == 2) { %> 
                  <span uk-tooltip="<%= riderSubmission.Notes %>"><i class="far fa-exclamation-triangle"></i>&nbsp;<%= riderSubmission.Status %></span>
                <% } else if(riderSubmission.Notes) { %>
                  <span uk-tooltip="<%= riderSubmission.Notes %>"><i class="far fa-comment-alt-lines"></i>&nbsp;<%= riderSubmission.Status %></span>
                <% } %>
              </td>
              <td>
                <%= dt.fromJSDate(riderSubmission.createdAt).toFormat('LLL d, yyyy @ HH:mm'); %>
              </td>
              <td>
                <% if(riderSubmission.StatusID == 0) { %> 
                  <span class="deleteSubmissionButton" uk-tooltip="Delete Submission" data-uid="<%- riderSubmission.id %>"><i class="far fa-trash-alt"></i></span>&nbsp;
                <% } %>
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  </main>
  <footer>
    <%- include('../partials/footer'); %>
  </footer>
  <script type="text/javascript" src="/js/user-profile.js"></script>
</body>