<head>
  <%- include('../partials/head'); %>
</head>

<body>
  <% if(activeUser) { %>
    <%- include('../partials/topnavUser'); %>
  <% } else { %>
    <%- include('../partials/topnav'); %>
  <% } %>
  <main>
    <h4>User Profile</h4>
    <% if(NotificationText) { %>
      <%- include('../partials/notice'); %>
    <% } %>
    <h5>My Profile Info</h5>
    <form class="signup uk-grid-small uk-form-stacked" uk-grid>
      <div class="uk-width-1-2@s">
        <label class="uk-form-label" for="FirstName">First Name</label>
        <input class="uk-input" id="FirstName" type="text" placeholder="Firstname" value="<%= User.FirstName %>">
      </div>
      <div class="uk-width-1-2@s">
        <label class="uk-form-label" for="LastName">Last Name</label>
        <input class="uk-input" id="LastName" type="text" placeholder="Lastname" value="<%= User.LastName %>">
      </div>
      <div class="uk-width-1-2@s">
        <label class="uk-form-label" for="UserName">Username</label>
        <input class="uk-input" id="UserName" type="text" placeholder="Username" value="<%= User.UserName %>">
      </div>
      <div class="uk-width-1-2@s">
        <label class="uk-form-label" for="Email">Email</label>
        <input class="uk-input" id="Email" type="email" placeholder="someone@domain.com" value="<%= User.Email %>">
      </div>
      <div class="uk-width-1-3@s">
        <label class="uk-form-label" for="City">City</label>
        <input class="uk-input" id="City" type="text" placeholder="City" value="<%= User.City %>">
      </div>
      <div class="uk-width-1-3@s">
        <label class="uk-form-label" for="State">State</label>
        <input class="uk-input" id="State" maxlength="2" type="text" placeholder="ST" value="<%= User.State %>">
      </div>
      <div class="uk-width-1-3@s">
        <label class="uk-form-label" for="ZipCode">Zip Code</label>
        <input class="uk-input" id="ZipCode" maxlength="5" type="zipcode" placeholder="zip" value="<%= User.ZipCode %>">
      </div>
      
      <div class="uk-width-1-2@s" uk-grid>
        <div class="uk-width-1-2@s" uk-tooltip="title: To change your flag number, please contact TOH; pos: bottom" >
          <label class="uk-form-label" for="FlagNumber">Flag Number</label>
          <input disabled class="uk-input" id="FlagNumber" type="text" placeholder="Flag Number" value="<%= User.FlagNumber %>" >
        </div>
        <div class="uk-width-1-2@s">
          <label class="uk-form-label" for="PillionFlagNumber">Passenger Flag Number</label>
          <% if(User.PillionFlagNumber && User.PillionFlagNumber != 0) { %>
            <input class="uk-input" id="PillionFlagNumber" type="text" value="<%= User.PillionFlagNumber %>">
          <% } else { %>
            <input class="uk-input" id="PillionFlagNumber" type="text" placeholder="N/A" value="N/A">
          <% } %>
        </div>
      </div>
      <div class="uk-width-1-2@s uk-text-center">
        <label class="uk-form-label" for="saveProfileEdits">&nbsp;</label>
        <button type="button" id="saveProfileEdits" class="uk-button uk-button-primary" data-userid="<%= User.id %>">Update User Profile</button>
        <button type="button" id="resetPasswordLink" class="uk-button uk-button-primary">Reset Login Password</button>
      </div>
    </form>
    <!-- <div class="toh-mt-18">
      <h5>Bike Info</h5>
      <table class="uk-table uk-table-striped uk-table-small" id="riderBikeInfo">
        <thead>
          <tr>
            <th>NickName</th>
            <th>Year</th>
            <th>Make</th>
            <th>Model</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% RiderBikeInfo.forEach(function(Bike) { %>
            <tr>
              <td>
                <%= Bike.Name %>
              </td>
              <td>
                <%= Bike.Year %>
              </td>
              <td>
                <%= Bike.Make %>
              </td>
              <td>
                <%= Bike.Model %>
              </td>
              <td>
                &nbsp;
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div> -->
    <div class="toh-mt-24">
      <h5>Submission History</h5>
      <table class="uk-table uk-table-striped uk-table-small" id="riderSubmissionHistory">
        <thead>
          <tr>
            <th>Code</th>
            <th>Category</th>
            <th>Status</th>
            <th>Date Submitted</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% RiderSubmissionHistory.forEach(function(riderSubmission) { %>
            <tr>
              <td>
                <span style="font-family: 'Source Code Pro', monospace;"><a href="/memorial/<%= riderSubmission.Code %>"><%= riderSubmission.Code %></a></span>
              </td>
              <td>
                <%= riderSubmission.Category %>
              </td>
              <td>
                <% if(riderSubmission.StatusID == 0) { %> 
                  <span uk-tooltip="<%= riderSubmission.ScorerNotes %>"><i class="fal fa-clock"></i>&nbsp;<%= riderSubmission.Status %></span>
                <% } %>
                <% if(riderSubmission.StatusID == 1) { %> 
                  <span uk-tooltip="<%= riderSubmission.ScorerNotes %>"><i class="fas fa-shield-check" color="green"></i>&nbsp;<%= riderSubmission.Status %></span>
                <% } %>
                <% if(riderSubmission.StatusID == 2) { %> 
                  <span uk-tooltip="<%= riderSubmission.ScorerNotes %>"><i class="fas fa-shield-exclamation" color="red"></i>&nbsp;<%= riderSubmission.Status %></span>
                <% } %>
                <% if(riderSubmission.ScorerNotes) { %>
                  <span uk-tooltip="<%= riderSubmission.ScorerNotes %>">&nbsp;<i class="fal fa-comment-alt-lines"></i></span>
                <% } %>
              </td>
              <td>
                <%= dt.fromJSDate(riderSubmission.createdAt).toFormat('LLL d, yyyy @ HH:mm'); %>
              </td>
              <td>
                <% if(riderSubmission.StatusID == 0) { %> 
                  <span class="deleteSubmissionButton" uk-tooltip="Delete Submission" data-uid="<%- riderSubmission.id %>"><i class="fal fa-trash-can"></i></span>&nbsp;
                <% } %>
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  </main>
  <footer>
    <%- include('../partials/footer'); %>
  </footer>
  <script type="text/javascript" src="/js/user-profile.js"></script>
</body>